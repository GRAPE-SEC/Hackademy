# 대칭키, 비대칭키 암호화, 컴퓨터에서 말하는 “서명”

# **Symmetric/Asymmetric encryption(대칭키,비대칭키 암호화)**

암호화는 니는 못알아보고 나는 알아볼 수 있도록 어떻게 잘 하는걸 말한다.

암호화는 암호함수라는 특수한 수학연산을 하는건데,(해커는 몰라도된다. 수학자 분들이 잘 만들어놓으셨으며, 새로운게 계속 개발된다) 

어떤 값을 연산해서 알아볼 수 없는 값으로 바꾼다.

이때, 암호함수는 원본데이터와 키라는 두개의 데이터를 받는데, 키는 사용자만 알고 남은 모르는 어떤 데이터이다.

핸드폰 패턴, 지문인식, 얼굴인식 등이 키가 될 수 있다.

원본 데이터와 키를 암호함수로 계산하면 암호화된 데이터가 나온다.

이때, 키와의 관계에 따라 암호함수를 대칭키 암호화(Symmetric Encryption) 와 비대칭키 암호화(Asymmetric Encryption)으로 분류한다.

## 대칭키 암호화

원본 데이터랑 키를 암호함수에 넣으면 암호화된 데이터가 나오고,

암호화된 데이터를 다시 키와 함께 암호함수에 넣으면 원본데이터가 나오는 경우를 말한다.

AES, DES 같은 알고리즘이 대칭키 암호함수이다.

 xor 도 대칭키 암호이다. 키를 알면 복호화 가능하다.

## 비대칭키 암호화

비대칭키 암호화는 키가 두개 존재하는 방식인데, 요상하게 동작하므로 다양한 곳에 활용된다.

공개키와 비밀키가 존재하는데,  두 키는 쌍으로 존재한다.

철수의 공개키는 철수의 비밀키가 존재하고, 영희의 비밀키에는 짝이 되는 영희의 공개키가 존재한다.

(키라고 해서 열쇠를 상상하는데 사실은 1232kjei12 어쩌고 하는 문자열이다.)

이때, 비밀키는 키 주인만 알고 있고, 공개키는 모두가 알고있다고 가정한다. 

실제 컴퓨터에서는 비밀키는 컴퓨터 내부에 저장하고 공개키를 네트워크로 상대에게 전송한다. 

대칭키는 하나의 키로 암호화와 복호화를 둘다 한다.

그런데 비대칭키에서는 공개키와 비공개키 둘다 암호화에 쓰일 수 있으나, 

**공개키로 암호화했을 경우에는 비공개키로만 풀 수 있다.**

정리하면 아래와 같다.

1. 공개키로 암호화하면 공개키로는 다시 복호화할 수 없다. 비밀키로만 복호화할 수 있다.
2. 비밀키로 암호화하면 비밀키로 복호화할 수 없다. 공개키로만 복호화할 수 있다. 
    
    → 근데 공개키는 어차피 누구나 갖고 있으므로 비밀키가 있는데 공개키가 없는 사람은 없다.
    

많은 사람들이 설명할때 빼먹는 내용인데, **복호화가 실패했을 경우, 실패했다는 것을 알 수 있다.**

수학적인 내용인데, 기본적으로 나누기 연산이기 때문에, 곱하기 해서 값을 비교해보면 된다.

이 성질을 컴퓨터에서는 요긴하게 써먹는다.

공개키로 암호화하는건 그냥 암호화라고 부르고, 비밀키로 암호화하는 경우 특별히 서명 또는 전자서명이라고 부른다. (암호화된 데이터=인증서라고함)

데이터는 인터넷을 통해 전송되는데 그 과정에서 다양한 네트워크 장비와 컴퓨터를 통과하므로 특정 네트워크 장비는 통과하는 데이터를 기록해둔다(방화벽 등) 

즉, 인터넷으로 보낸 정보는 누구나 볼 수 있다. 아파트 벽에 붙여두는 것과 다름이 없다.

### 공개키로 암호화하는 경우(암호화)

철수가 영희만 보면 좋겠는 글을 아파트 벽에 붙이려고 한다.

그냥 붙이면 누구나 다 읽어서 실패다.

1. 대칭키로 암호화하면 키가 있어야 복호화할 수 있다. 영희에게 키값을 알아야한다.
    1. 아파트 벽에 키값을 붙여놓으면 실패다. 아무나 읽을 수 있다.

1. 비대칭키 암호화가 있으면 이 문제를 해결할 수 있다.
    1. 철수가 영희한테 영희의 공개키를 아파트 벽에 붙이라고 한다.
    2. 철수가 영희의 공개키로 내용을 암호화해서 벽에 붙인다
    3. 영희의 공개키로 암호화한 것은 영희의 비밀키로만 풀 수 있다. 재호의 비밀키로는 풀 수 없다. 따라서 영희만 읽어서 안전하게 통신 성공~
    
    하지만 문제가 있다.
    
    1. 철수를 사칭하는 것을 막을 수 없다. 철수의 요구로 영희가 자기 공개키를 아파트벽에다가 붙이면 재호가 그 키로 철수인척 암호화하고 벽에 붙여놓을 수 있다. 만약 그런 나쁜 사람이 100명이라면 아파트 벽에는 100개의 영희의 공개키로 암호화된 데이터가 잔뜩 붙어있을것이고 영희는 이중에 누구것이 철수것인지 구분할 수 없다.

### 비밀키로 암호화하는 경우(서명)

비밀키를 이용하면 이 데이터의 주인이 철수임을 “증명”할 수 있다. 즉 사칭을 못하게 할 수 있다.

철수가 비밀키로 암호화한 것은 철수의 공개키로만 풀린다. 영희나 재호의 공개키로는 풀려고 시도하면 **실패한다.**

즉, 철수가 어떤 데이터를 자기 비밀키로 암호화하고 자기 공개키를 뿌리면,

수많은 데이터 중에서 철수의 데이터를 구분할 수 있다.

1. 철수가 영희한테 영희의 공개키를 아파트벽에 붙이라고 한다.
2. 철수가 영희의 공개키로 내용을 암호화한다음 철수의 비밀키로 한번더 암호화한다. (서명한다)
3. 철수가 아파트벽에 자기 공개키랑 암호화된 데이터를 붙인다.
4. 영희는 철수의 공개키로 풀리는걸 확인하고, 철수가 보낸 것이 맞다고 안심한다.
5. 풀린 데이터를 한번 더 영희의 비밀키로 풀어서 내용을 확인한다.

이러한 성질은 디지털 서명, 인증서 등에 널리 활용된다.